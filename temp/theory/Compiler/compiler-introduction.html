<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
    <title>编译原理：引论 | Ray Taylor Lin&#39;s world</title>
    <meta name="author" content="林寿山">
    
    <meta name="description" content="程序设计语言是向人和计算机描述计算过程的符号。世界上所有计算机上运行的所有软件都是由某种程序设计语言编写的。但是在一个程序可以运行之前，它首先需要被翻译成一种能被计算机执行的形式。完成这项翻译工作的软件系统成为编译器（compiler）。
本文将介绍编译器的不同形式，在高层次上概述一个典型编译器的结构，并讨论了程序设计语言和硬件体系结构的发展趋势。">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta property="og:title" content="编译原理：引论"/>
    <meta property="og:site_name" content="林寿山的技术博客 Ray Taylor Lin&#39;s world"/>

    <link rel="alternate" href="/atom.xml" title="Ray Taylor Lin&#39;s world" type="application/atom+xml">
    <link rel="stylesheet" href="/css/lib/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/css/lib/normalize.css" type="text/css">
    <link rel="stylesheet" href="/css/lib/furatto.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

    
        <link rel="stylesheet" href="/css/lib/prettify_raytaylorism.css" type="text/css">
        
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="/js/jquery-1.10.2.min.js"></script>
    <script src="/js/jquery.jpanelmenu.js"></script>
</head>


<body class="container-fluid">
    <header id="page-header">
        <div class="navbar inverse-navbar">
    <div class="navbar-inner">
        <div class="container-center">
            <a href="/index.html" class="menu-trigger" data-meteocon="M">
                <i class="icon-reorder"></i>
            </a>
            <div class="nav-collapse navbar-responsive-collapse collapse">
                <nav id="menu">
                    <ul class="nav">
                        <li><a class="brand" id="blog-title" href="/index.html">Ray Taylor Lin&#39;s world</a></li>
                    </ul>
                    <div class="pull-right nav" id="nav-button-group">
                        
                            <a href="/" class="menu-home btn btn-primary btn-large">
                                <i class="icon-home icon-white"></i>
                                首页
                            </a>
                        
                            <a href="/archives" class="menu-archive btn btn-primary btn-large">
                                <i class="icon-archive icon-white"></i>
                                归档
                            </a>
                        
                            <a href="javascript:void(0);" class="menu-category btn btn-primary btn-large">
                                <i class="icon-archive icon-white"></i>
                                分类
                            </a>
                        
                            <a href="/reading" class="menu-reading btn btn-primary btn-large">
                                <i class="icon-book icon-white"></i>
                                读书
                            </a>
                        
                            <a href="/about" class="menu-about btn btn-primary btn-large">
                                <i class="icon-user icon-white"></i>
                                关于
                            </a>
                        
                    </div>
                </nav>
                <nav id="jPanelMenu-menu-side">
    <ul class="nav main-menu">
        <li><a class="brand" href="index.html">Ray Taylor Lin&#39;s world</a></li>
        
            <li>
                <a href="/" class="menu-home">
                    <i class="icon-home icon-white"></i>
                    首页
                </a>
            </li>
        
            <li>
                <a href="/archives" class="menu-archive">
                    <i class="icon-archive icon-white"></i>
                    归档
                </a>
            </li>
        
            <li>
                <a href="javascript:void(0);" class="menu-category">
                    <i class="icon-archive icon-white"></i>
                    分类
                </a>
            </li>
        
            <li>
                <a href="/reading" class="menu-reading">
                    <i class="icon-book icon-white"></i>
                    读书
                </a>
            </li>
        
            <li>
                <a href="/about" class="menu-about">
                    <i class="icon-user icon-white"></i>
                    关于
                </a>
            </li>
        
    </ul>

    <ul class="nav category-menu hide">
        <li>
            <span><a class="brand" href="javascript:void(0);">分类目录</a></span>
            <span><a class="btn-back brand pull-right" href="javascript:void(0);">
                <i class="icon-arrow-left"></i>
            </a></span>
        </li>

        

        

            

            <li collapse-level="0">
                <a href="/categories/Tech/" class="collapse-level-0">
                    <i class="icon-caret-right"></i>
                    Tech(59)
                </a>
            </li>

            

            

            <li collapse-level="1">
                <a href="/categories/Tech/game/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    game(4)
                </a>
            </li>

            

            

            <li collapse-level="2">
                <a href="/categories/Tech/game/server/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    server(3)
                </a>
            </li>

            

            

        

        

            <li collapse-level="1">
                <a href="/categories/Tech/other/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    other(3)
                </a>
            </li>

            

            

            <li collapse-level="2">
                <a href="/categories/Tech/other/DP/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    DP(1)
                </a>
            </li>

            

            

        

        

            <li collapse-level="1">
                <a href="/categories/Tech/algorithm/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    algorithm(6)
                </a>
            </li>

            

            

        

            <li collapse-level="1">
                <a href="/categories/Tech/Linux/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    Linux(2)
                </a>
            </li>

            

            

        

            <li collapse-level="1">
                <a href="/categories/Tech/IDE/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    IDE(2)
                </a>
            </li>

            

            

        

            <li collapse-level="1">
                <a href="/categories/Tech/git/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    git(4)
                </a>
            </li>

            

            

        

            <li collapse-level="1">
                <a href="/categories/Tech/Script/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    Script(15)
                </a>
            </li>

            

            

            <li collapse-level="2">
                <a href="/categories/Tech/Script/Lua/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    Lua(7)
                </a>
            </li>

            

            

        

            <li collapse-level="2">
                <a href="/categories/Tech/Script/Python/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    Python(4)
                </a>
            </li>

            

            

        

        

            <li collapse-level="1">
                <a href="/categories/Tech/web/" class="collapse-level-1">
                    <i class="icon-caret-right"></i>
                    web(23)
                </a>
            </li>

            

            

            <li collapse-level="2">
                <a href="/categories/Tech/web/HTTP/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    HTTP(7)
                </a>
            </li>

            

            

        

            <li collapse-level="2">
                <a href="/categories/Tech/web/HTML5/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    HTML5(2)
                </a>
            </li>

            

            

        

            <li collapse-level="2">
                <a href="/categories/Tech/web/CSS/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    CSS(3)
                </a>
            </li>

            

            

        

            <li collapse-level="2">
                <a href="/categories/Tech/web/Node-js/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    Node-js(10)
                </a>
            </li>

            

            

        

            <li collapse-level="2">
                <a href="/categories/Tech/web/javascript/" class="collapse-level-2">
                    <i class="icon-caret-right"></i>
                    javascript(1)
                </a>
            </li>

            

            

        

        

        

            <li collapse-level="0">
                <a href="/categories/daily/" class="collapse-level-0">
                    <i class="icon-caret-right"></i>
                    daily(6)
                </a>
            </li>

            

            

        

        
    </ul>
</nav>
            </div>
        </div>
    </div>
</div>

    </header>
    <div id="content-wrapper">
        <div class="container-center">
        <article class="page">
    <div class="article-title article-title-big">
        
    
        <h1>编译原理：引论</h1>
    

    </div>

    <div class="date-row ">
        <time datetime="2014-05-07T01:11:08.000Z">2014-05-07</time>
    </div>

    <div class="toc-wrap">
        <div class="toc-title">目录</div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-_语言处理器"><span class="toc-number">1.</span> <span class="toc-text">1. 语言处理器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-_编译器的结构"><span class="toc-number">2.</span> <span class="toc-text">2. 编译器的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1_词法分析（lexical_analysis）"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 词法分析（lexical analysis）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2_语法分析（syntax_analysis）"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 语法分析（syntax analysis）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3_语义分析（semantic_analysis）"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 语义分析（semantic analysis）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4_中间代码生成"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 中间代码生成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5_代码优化"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 代码优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6_代码生成"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 代码生成</span></a></li></ol></li></ol>
    </div>

    <div class="entry">
        <p>程序设计语言是向人和计算机描述计算过程的符号。世界上所有计算机上运行的所有软件都是由某种程序设计语言编写的。但是在一个程序可以运行之前，它首先需要被翻译成一种能被计算机执行的形式。完成这项翻译工作的软件系统成为<strong>编译器</strong>（compiler）。</p>
<p>本文将介绍编译器的不同形式，在高层次上概述一个典型编译器的结构，并讨论了程序设计语言和硬件体系结构的发展趋势。</p>
<a id="more"></a>

<h1 id="1-_语言处理器">1. 语言处理器</h1>
<p>简单来说，一个编译器就是一个程序，它可以阅读以某一种语言（源语言）编写的程序，并把该程序翻译成为一个等价的，用另一个语言（目标语言）编写的程序。编译器的重要任务之一是报告它在翻译过程中发现的源程序中的错误。如果目标程序时可执行的机器语言程序，那么它就可以被用户调用，处理输入并产生输出。</p>
<p><strong>解释器</strong>（interpreter）是另一种常见的语言处理器。它并不通过翻译的方式生成目标程序。从用户的角度看，解释器直接利用用户提供的输入执行源程序中指定的操作。</p>
<p>一个源程序可能被分割成多个模块，存放于独立的文件中。一个被称为<strong>预处理器</strong>（preprocessor）的程序把源程序据合在一起，还负责把宏转换成源语言的语句。编译器可能产生一个较容易输出和调试的汇编语言程序作为输出，这个汇编程序由<strong>汇编器</strong>（assembler）处理，并生成可重定位的机器代码。机器代码可能会合其他可重定位的目标文件和库文件连接到一起，形成真正在机器上运行的代码。一个文件中的代码可能指向另一个文件中的位置，而<strong>链接器</strong>（linker）能够解决外部内存地址的问题。最后，<strong>加载器</strong>（loader）把所有的可执行目标文件放到内存中执行。以上所讲各部分共同构成了一个语言处理系统，如下图所示。</p>
<p><img src="http://raytaylorlin-blog.qiniudn.com/image/compiler/%E4%B8%80%E4%B8%AA%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%93%E6%9E%84.jpg" alt="一个语言处理系统的结构"></p>
<h1 id="2-_编译器的结构">2. 编译器的结构</h1>
<p>把编译器看成一个黑盒，它能够把源程序映射为语义上等价的目标程序。这个映射过程分为两部分：分析（analysis）和综合（synthesis）。分析部分（前端）把源程序分解成多个组成要素，并加上语法结构，然后用这个结构创建源程序的一个中间表示。如果检查出源程序没有按照正确的语法构成或语义，就得提供有用的信息使得用户可以按此进行改正。分析部分还会收集有关源程序的信息，并把信息存放在一个称为符号表（symbol table）的数据结构中。符号表将和中间表示形式一起传送给综合部分。综合部分（后端）根据这些信息来构造用户期待的目标程序。下图是一个编译器完整的步骤示意图。</p>
<p><img src="http://raytaylorlin-blog.qiniudn.com/image/compiler/%E4%B8%80%E4%B8%AA%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%90%84%E4%B8%AA%E6%AD%A5%E9%AA%A4.jpg" alt="一个编译器的各个步骤"></p>
<h2 id="2-1_词法分析（lexical_analysis）">2.1 词法分析（lexical analysis）</h2>
<p>词法分析器读入组成源程序的字符流，并组织成为有意义的<strong>词素</strong>（lexeme）的序列。对于每个词素，词法分析器产生如下形式的词法单元（token）：</p>
<pre><code>//<span class="keyword">token</span>-name: 语法分析步骤使用的抽象符号<span class="comment">
//attribute-value: 指向符号表关于这个token的条目    </span>
&lt;<span class="keyword">token</span>-name, attribute-<span class="built_in">value</span>&gt;
</code></pre><p>比如，假设源程序包含一个赋值语句<code>position = initial + rate * 60</code>，它可能被分解成5个词素，对应的词法单元分别是<code>&lt;id, 1&gt;</code>, <code>&lt;=&gt;</code>, <code>&lt;id, 2&gt;</code>, <code>&lt;+&gt;</code>, <code>&lt;id, 3&gt;</code>, <code>&lt;*&gt;</code>, <code>&lt;number, 60&gt;</code>。</p>
<h2 id="2-2_语法分析（syntax_analysis）">2.2 语法分析（syntax analysis）</h2>
<p>语法分析器使用由词法分析器生成的各个词法单元的第一个分量来创建树形的中间表示（语法树），树中的每个内部结点表示一个运算，该结点的子结点表示运算的分量。编译器后续步骤使用这个语法结构来帮助分析源程序。</p>
<h2 id="2-3_语义分析（semantic_analysis）">2.3 语义分析（semantic analysis）</h2>
<p>语义分析器使用语法树和符号表中的信息来检查源程序是否和语言定义的语义一致。语义分析的一个重要部分是<em>类型检查</em>，编译器检查每个运算符是否具有匹配的运算分量。程序设计语言可能允许<em>自动类型转换</em>，例如一个运算符应用于一个浮点数和一个整数，编译器会把整数自动转换成浮点数。</p>
<h2 id="2-4_中间代码生成">2.4 中间代码生成</h2>
<p>经过上述步骤后，很多编译器生成一个明确的低级的或类及其语言的中间表示。这种中间表示应该具有两个重要性质：易于生成，能被轻松翻译为目标及其上的语言。下面给出一种用<em>三地址代码</em>的中间表示形式来表示2.1节中赋值语句的中间代码。三地址指令的右部最多只有一个运算符，因此这些指令确定了运算完成的顺序。</p>
<pre><code><span class="variable">t1 =</span> inttofloat(<span class="number">60</span>)
<span class="variable">t2 =</span> id3 * t1
<span class="variable">t3 =</span> id2 + t2
<span class="variable">id1 =</span> t3
</code></pre><h2 id="2-5_代码优化">2.5 代码优化</h2>
<p>机器无关的代码优化试图改进中间代码，以便生成运行效率更高的目标代码，当然优化代码可能会增加编译的耗时。例如上面的中间代码可以优化成：</p>
<pre><code><span class="variable">t1 =</span> id3 * <span class="number">60.0</span>
<span class="variable">id1 =</span> id2 + t1
</code></pre><h2 id="2-6_代码生成">2.6 代码生成</h2>
<p>代码生成器以源程序的中间表示作为输入，并输出成目标语言。如果目标语言是机器代码，那么必须为程序使用的每个变量选择寄存器或内存位置。要注意的是，运行时刻的存储组织方式依赖于被编译的语言。编译器在和总监代码生成或代码生成阶段作出有关存储分配的决定。</p>
<p>前面讲的是一个编译器的逻辑组织方式。在一个特定的实现中，多个步骤的活动可以被组合成<em>一趟</em>。每趟读入一个输入文件并产生一个输出文件。例如，前端步骤中的词法分析、语法分析、语义分析、中间代码生成就可以组合成一趟。代码优化可以违一个可选的躺，然后可以有一个为特定目标机器生成代码的后端趟。</p>
<p>参考文献：机械工业出版社《编译原理（第二版）》第1章</p>

    </div>
    
    <footer >
        
            
            
    
    <div class="tags-row">
        标签：<a class="btn btn-info" href="/undefined">undefined</a>
    </div>

        
        <div class="clearfix"></div>
    </footer>
</article>



<section id="comment">
    <h1 class="page-sub-title">留言</h1>
    <!-- Duoshuo Comment BEGIN -->
    <div class="ds-thread" data-title="编译原理：引论">

    <script type="text/javascript">
        var duoshuoQuery = {short_name:"raytaylorlin"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';
            ds.async = true;
            ds.src = 'http://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- Duoshuo Comment END -->
    </div>
</section>


        </div>
    </div>
    <footer id="page-footer"><div class="footer-content">
    <div class="container-center">
        <div class="footer-text pull-left">
            <div class="copyright">
                
                Copyright &copy; 2015 <a href="/">林寿山</a>
                
            </div>
            <div class="theme-copyright">
                <span>Blog powered by <a href="http://zespia.tw/hexo/zh-CN/">hexo</a></span>
                Theme <a href="https://github.com/raytaylorlin/hexo-theme-raytaylorism">raytaylorism</a> desgined by <strong>Nix</strong>
            </div>
        </div>
        <div class="social-group pull-right">
            
            <a href="https://github.com/raytaylorlin" target="_blank" title="github"><i class="icon-github"></i></a>
            
            
            <a href="http://weibo.com/1956184117" target="_blank" title="新浪微博"><i class="icon-weibo"></i></a>
            
            
            <a href="http://www.renren.com/309069699" target="_blank" title="人人网"><i class="icon-renren"></i></a>
            
            
            <a href="https://plus.google.com/113216251417550089742?rel=author" target="_blank" title="Google+"><i class="icon-google-plus-sign"></i></a>
            
        </div>
        <div class="clearfix"></div>
    </div>
</div>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-43460643-1', 'raytaylorlin.com');
    ga('send', 'pageview');

</script>


<script src="/js/prettify.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("pre").addClass("prettyprint");
        prettyPrint();
    });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script>
    (function($) {
        //当内容区内容不够长时，设置内容区域的高度使footer沉底
        var resizeContentWrapper = function() {
            //HACK: 用延时的方法使计算高度时候更加准确，会有一闪的情况
            setTimeout(function() {
                var contentHeight = Math.floor($('#content-wrapper .container-center').height()),
                headerHeight = Math.floor($('#page-header').height()),
                footerHeight = Math.floor($('#page-footer').height()),
                minHeight = Math.floor($(window).height() - headerHeight - footerHeight);
                if(contentHeight < minHeight) {
                    $('#content-wrapper').css({height: minHeight});                    
                } else {
                    $('#content-wrapper').css({height: 'auto'});
                }
            },500);
        };

        //响应式侧边栏
        var initJPanelMenu = function() {
            var jPM = $.jPanelMenu({
                menu: '#jPanelMenu-menu-side',
                duration: 500
            });
            jPM.on();
        };

        //初始化目录按钮事件绑定
        var initCategory = function() {
            function showMainMenu() {
                var $jPanelMenu = $('#jPanelMenu-menu');
                $jPanelMenu.find('ul.category-menu').hide();
                $jPanelMenu.find('ul.main-menu').fadeIn();
            }

            function showCategoryMenu() {
                var $jPanelMenu = $('#jPanelMenu-menu');
                $jPanelMenu.find('ul.main-menu').hide();
                $jPanelMenu.find('ul.category-menu').fadeIn();
            }

            $('.menu-category').click(function() {
                var jPM = $.jPanelMenu({
                    duration: 500,
                    beforeOpen: function() {
                        showCategoryMenu();
                    },
                    afterClose: function() {
                        showMainMenu();
                    }
                });
                if(jPM.isOpen()) {
                    showCategoryMenu();
                } else {
                    jPM.open();
                }
            });

            $('.category-menu').on('click', '.btn-back', function() {
                showMainMenu();
            });
        };

        $(document).ready(resizeContentWrapper);
        $(document).ready(initJPanelMenu);
        $(document).ready(initCategory);
        
        $(window).resize(resizeContentWrapper);
    })(jQuery);
</script>
</body>
</html>